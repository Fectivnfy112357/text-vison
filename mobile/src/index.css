@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-gray-200;
  }
  
  html {
    @apply h-full;
    /* 移动端基础字体大小调整 */
    font-size: 16px;
    /* 防止iOS Safari滚动时视口变化 */
    height: 100vh;
    height: -webkit-fill-available;
  }
  
  @media (max-width: 768px) {
    html {
      font-size: 14px;
    }
  }
  
  body {
    @apply bg-gradient-to-br from-cream-50 to-mist-50 text-gray-900 antialiased h-full;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    /* 确保文字在移动端不会被缩放过小 */
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
    /* 防止iOS Safari滚动时视口变化 */
    height: 100vh;
    height: -webkit-fill-available;
    overflow: hidden;
  }
  
  #root {
    @apply h-full;
    height: 100vh;
    height: -webkit-fill-available;
  }
}

@layer components {
  /* 移动端安全区域 */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* 固定在底部，防止iOS Safari滚动时移动 */
  .fixed-bottom-safe {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 50;
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
  
    
  /* 卡片样式 - 性能优化版本 */
  .card-soft {
    @apply bg-white/80 rounded-2xl shadow-soft border border-white/50;
  }
  
  .card-glow {
    @apply bg-gradient-to-br from-white/90 to-white/70 rounded-2xl;
    @apply shadow-glow border border-white/60;
  }
  
  /* 输入框样式 */
  .input-soft {
    @apply bg-white/70 border border-white/60 rounded-xl;
    @apply focus:bg-white/90 focus:border-primary-300 focus:ring-2 focus:ring-primary-200/50;
  }
  
  /* 渐变文字 */
  .text-gradient {
    @apply bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent;
  }
  
  /* 毛玻璃效果 - 性能优化版本 */
  .glass {
    @apply bg-white/20 border border-white/30;
  }
  
  /* 优化的渐变背景 */
  .gradient-optimized {
    /* 移除性能开销大的属性 */
  }
  
  /* 减少模糊性能影响的类 */
  .blur-optimized {
    filter: blur(8px);
  }
  
  }

@layer utilities {
  /* 隐藏滚动条 */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* 性能优化：硬件加速 */
  .gpu-accelerated {
    /* 只在必要时使用硬件加速 */
  }
  
  /* 优化的动画性能 */
  .animate-performant {
    /* 移除过度的 will-change 声明 */
  }
  
  /* 减少重绘的模糊效果 */
  .blur-performant {
    filter: blur(12px);
  }
  
  /* CSS Containment 优化 */
  .contain-content {
    contain: content;
  }
  
  .contain-strict {
    contain: strict;
  }
  
  .contain-layout {
    contain: layout;
  }
  
  .contain-style {
    contain: style;
  }
  
  .contain-paint {
    contain: paint;
  }
  
  /* 优化的滚动性能 */
  .scroll-smooth-performant {
    scroll-behavior: smooth;
    scroll-padding-top: env(safe-area-inset-top);
  }
  
  /* Passive 事件支持 */
  .touch-manipulation-passive {
    touch-action: manipulation;
    -webkit-touch-callout: none;
  }
  
  /* 移动端触摸优化 */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* 防止文本选择 */
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
    
  /* 移动端文字大小优化 */
  .mobile-readable {
    font-size: 1rem;
    line-height: 1.5;
  }
  
  @media (max-width: 768px) {
    .mobile-readable {
      font-size: 0.9375rem;
    }
  }
  
  .mobile-title {
    font-size: 1.25rem;
    font-weight: 600;
  }
  
  @media (max-width: 768px) {
    .mobile-title {
      font-size: 1.25rem;
    }
  }
}

/* 移动端特定样式 */
@media (max-width: 768px) {
  /* 优化移动端渲染性能 */
  .mobile-optimized {
    /* 移除不必要的硬件加速 */
  }
  
  .mobile-padding {
    @apply px-4;
  }
  
  .mobile-text {
    font-size: 0.875rem; /* 14px */
  }
  
  .mobile-text-sm {
    font-size: 0.75rem; /* 12px */
  }
  
  .mobile-text-lg {
    font-size: 1rem; /* 16px */
  }
  
  .mobile-text-xl {
    font-size: 1.125rem; /* 18px */
  }
  
  /* 针对高密度屏幕调整字体大小 */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .mobile-text {
      font-size: 0.875rem; /* 14px */
    }
  }
}

/* 深色模式支持 */
@media (prefers-color-scheme: dark) {
  body {
    @apply bg-gradient-to-br from-gray-900 to-gray-800 text-white;
  }
  
  .card-soft {
    @apply bg-gray-800/80 border-gray-700/50;
  }
  
  .input-soft {
    @apply bg-gray-800/70 border-gray-700/60 text-white;
    @apply focus:bg-gray-800/90 focus:border-primary-400;
  }
}